(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{122:function(e,t,n){e.exports={selectedPage:"Paginator_selectedPage__2txsQ"}},123:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__J3LEV",selectedPage:"Users_selectedPage__SWZ7W"}},124:function(e,t,n){e.exports={post:"Post_post__3W-rt"}},157:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,284)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),a(e),o(e)}))},o=n(59),i=n.n(o),c=n(21),u=n(22),l=n(24),j=n(23),d=(n(157),n(12)),p=n(35),b=n.n(p),f=n(0),g=function(){return Object(f.jsxs)("nav",{className:b.a.nav,children:[Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"/profile",activeClassName:b.a.active,children:"Profile"})}),Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"/dialogs",activeClassName:b.a.active,children:"Messages"})}),Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"/users",activeClassName:b.a.active,children:"Users"})}),Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"/music",activeClassName:b.a.active,children:"Music"})}),Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"/settings",activeClassName:b.a.active,children:"Settings"})})]})},h=n(9),O=function(){return Object(f.jsx)("div",{children:"Music"})},m=function(){return Object(f.jsx)("div",{children:"Settings"})},x=n(33),v=n(5),C={dialogsData:[{id:"1",name:"Billy"},{id:"2",name:"Frankie"},{id:"3",name:"Mario"},{id:"4",name:"Itzka"},{id:"5",name:"Adam"},{id:"6",name:"Hue"}],messagesData:[{id:"1",message:"Hello guys"},{id:"2",message:"Hello you guys"},{id:"3",message:"How is your going"},{id:"4",message:"What have you seen"},{id:"5",message:"Hello guys"},{id:"6",message:"Hello guys"}]},w=n(29),S=n.n(w),A=function(e){return Object(f.jsx)("div",{className:S.a.dialog,children:Object(f.jsx)(d.b,{to:"/dialogs/"+e.id,children:e.name})})},P=function(e){return Object(f.jsx)("div",{className:S.a.message,children:e.content})},y=n(117),E=n(118),N=n(34),k=n.n(N),U=function(e){var t=e.meta.touched&&e.meta.error;return Object(f.jsxs)("div",{className:k.a.formControl+" "+(t?k.a.error:""),children:[Object(f.jsx)("div",{children:Object(f.jsx)("textarea",Object(v.a)(Object(v.a)({},e.input),e))}),t?Object(f.jsx)("span",{children:e.meta.error}):Object(f.jsx)("br",{})]})},T=function(e){var t=e.meta.touched&&e.meta.error;return Object(f.jsxs)("div",{className:k.a.formControl+" "+(t?k.a.error:""),children:[Object(f.jsx)("div",{children:Object(f.jsx)("input",Object(v.a)(Object(v.a)({},e.input),e))}),t?Object(f.jsx)("span",{children:e.meta.error}):Object(f.jsx)("br",{})]})},L=function(e){if(!e)return"Field is required"},I=function(e){return function(t){if(t&&t.length>e)return"Max length should be fewer or equal ".concat(e," characters ")}},F=function(e){var t=e.dialogsPage,n=t.dialogsData.map((function(e){return Object(f.jsx)(A,{name:e.name,id:e.id})})),r=t.messagesData.map((function(e){return Object(f.jsx)(P,{content:e.message})}));return!1===e.isAuth?Object(f.jsx)(h.a,{to:"/login"}):Object(f.jsxs)("div",{className:S.a.dialogs,children:[Object(f.jsx)("div",{className:S.a.dialogsItems,children:n}),Object(f.jsxs)("div",{className:S.a.messages,children:[Object(f.jsx)("div",{children:r}),Object(f.jsx)(D,{onSubmit:function(t){e.sendMessage(t.newMessageBody)}})]})]})},z=I(50),D=Object(E.a)({form:"dialogAddMessageForm"})((function(e){return Object(f.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(f.jsx)("div",{children:Object(f.jsx)(y.a,{component:U,name:"newMessageBody",placeholder:"Type your text here",validate:[L,z]})}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Add"})})]})})),G=n(10),R=function(e){return{isAuth:e.auth.isAuth}},M=function(e){var t=function(t){Object(l.a)(r,t);var n=Object(j.a)(r);function r(){return Object(c.a)(this,r),n.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return!1===this.props.isAuth?Object(f.jsx)(h.a,{to:"/login"}):Object(f.jsx)(e,Object(v.a)({},this.props))}}]),r}(s.a.Component);return Object(G.b)(R)(t)},_=n(8),K=(M(F),Object(_.d)(Object(G.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:"SEND-MESSAGE",newMessageBody:e}}(t))}}})),M)(F)),Q=n(11),W=n.n(Q),V=n(16),B=n(121),H="https://social-network.samuraijs.com/api/1.0/",J=n.n(B).a.create({withCredentials:!0,baseURL:H,headers:{"API-KEY":"49c9fc27-b65d-436b-ad55-f34f2b452a65"}}),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return J.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},q=function(e){return ee.getProfile(e)},Y=function(){return J.get("auth/me")},Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return J.post("auth/login",{email:e,password:t,rememberMe:n})},$=function(){return J.delete("auth/login")},ee={getProfile:function(e){return J.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return J.get("profile/status/".concat(e))},updateStatus:function(e){return J.put("profile/status",{status:e})}},te={users:[],pageSize:100,totalUsersCount:1,currentPage:1,isFetching:!1,followingProgress:[]},ne=function(e){return{type:"FOLLOW",userId:e}},re=function(e){return{type:"UNFOLLOW",userId:e}},se=function(e){return{type:"SET-USERS",users:e}},ae=function(e){return{type:"SET-TOTAL-USERS-COUNT",totalUsersCount:e}},oe=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},ie=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROCESS",isFetching:e,userId:t}},ce=n(122),ue=n.n(ce),le=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);return Object(f.jsx)("div",{children:n.map((function(t){return Object(f.jsx)("span",{onClick:function(n){e.onPageChanged(t)},className:e.currentPage===t?ue.a.selectedPage:"",children:t})}))})},je=n(127),de=n(123),pe=n.n(de),be=n.p+"static/media/homer-warrior.0d5993ef.jpg",fe=function(e){var t=e.user,n=Object(je.a)(e,["user"]);return Object(f.jsxs)("div",{children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("div",{children:Object(f.jsx)(d.b,{to:"profile/"+t.id,children:Object(f.jsx)("img",{src:t.photos.small?t.photos.small:be,className:pe.a.userPhoto})})}),Object(f.jsx)("div",{children:t.followed?Object(f.jsx)("button",{disabled:n.followingProgress.some((function(e){return e===t.id})),onClick:function(){n.unfollow(t.id)},children:"Unfollow"}):Object(f.jsx)("button",{disabled:n.followingProgress.some((function(e){return e===t.id})),onClick:function(){n.follow(t.id)},children:"Follow"})})]}),Object(f.jsxs)("span",{children:[Object(f.jsxs)("span",{children:[Object(f.jsx)("div",{children:t.name}),Object(f.jsx)("div",{children:t.status})]}),Object(f.jsxs)("span",{children:[Object(f.jsx)("div",{children:"user.location.country"}),Object(f.jsx)("div",{children:"user.location.city"})]})]})]})},ge=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(le,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged}),e.users.map((function(t){return Object(f.jsx)(fe,{follow:e.follow,unfollow:e.unfollow,followingProgress:e.followingProgress,user:t},t.id)}))]})},he=n.p+"static/media/preloader.a1a99674.gif",Oe=function(e){return Object(f.jsx)("div",{style:{position:"absolute",margin:"30vh 40%"},children:Object(f.jsx)("img",{src:he,style:{width:"60px",height:"60px"}})})},me=n(126),xe=Object(me.a)((function(e){return e.usersPage.users}),(function(e){return e})),ve=function(e){return e.usersPage.pageSize},Ce=function(e){return e.usersPage.totalUsersCount},we=function(e){return e.usersPage.currentPage},Se=function(e){return e.usersPage.isFetching},Ae=function(e){return e.usersPage.followingProgress},Pe=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).onPageChanged=function(t){e.props.getUsers(t,e.props.pageSize),e.props.setCurrentPage(t),e.props.toggleIsFetching(!0)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[this.props.isFetching?Object(f.jsx)(Oe,{}):null,Object(f.jsx)(ge,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,onPageChanged:this.onPageChanged,follow:this.props.follow,unfollow:this.props.unfollow,followingProgress:this.props.followingProgress})]})}}]),n}(s.a.Component),ye=(M(Pe),Object(_.d)(Object(G.b)((function(e){return{users:xe(e),pageSize:ve(e),totalUsersCount:Ce(e),currentPage:we(e),isFetching:Se(e),followingProgress:Ae(e)}}),{follow:function(e){return function(){var t=Object(V.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ie(!0,e)),t.next=3,r=e,J.post(H+"follow/".concat(r),{}).then((function(e){return e.data}));case 3:0===t.sent.resultCode&&n(ne(e)),n(ie(!1,e));case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(V.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(ie(!0,e)),t.next=3,r=e,J.delete(H+"follow/".concat(r)).then((function(e){return e.data}));case 3:0===t.sent.resultCode&&n(re(e)),n(ie(!1,e));case 6:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},setUsers:se,setCurrentPage:function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},setTotalUsersCount:ae,toggleIsFetching:oe,toggleFollowingProcess:ie,getUsers:function(e,t){return function(){var n=Object(V.a)(W.a.mark((function n(r){var s;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(oe(!0)),n.next=3,X(e,t);case 3:s=n.sent,r(oe(!1)),r(se(s.items)),r(ae(s.totalCount));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(Pe)),Ee=n(86),Ne=function(e){var t=Object(r.useState)(!1),n=Object(Ee.a)(t,2),s=n[0],a=n[1],o=Object(r.useState)(e.status),i=Object(Ee.a)(o,2),c=i[0],u=i[1];Object(r.useEffect)((function(){u(e.status)}),[s]);return Object(f.jsxs)("div",{children:[s?Object(f.jsx)("div",{children:Object(f.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},onBlur:function(){a(!1),e.updateStatus(c)},value:c,autoFocus:!0})}):Object(f.jsx)("div",{children:Object(f.jsx)("span",{onDoubleClick:function(){a(!0)},children:e.status||"No status yet"})}),Object(f.jsx)("br",{})]})},ke=function(e){return e.profile?Object(f.jsx)("div",{children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:e.profile.photos.large?e.profile.photos.large:be}),Object(f.jsx)(Ne,{status:e.status,updateStatus:e.updateStatus})]})}):Object(f.jsx)(Oe,{})},Ue={postsData:[{id:"1",message:"hi what's new",likesAmount:"6"},{id:"2",message:"Hello i'm an alien from planet of ww1",likesAmount:"15"},{id:"3",message:"How is your going",likesAmount:"2"},{id:"4",message:"What have you seen",likesAmount:"1"},{id:"5",message:"Hello guys",likesAmount:"0"},{id:"6",message:"Hello guys",likesAmount:"3"}],profile:null,status:""},Te=function(e){return{type:"SET-STATUS",status:e}},Le=n(124),Ie=n.n(Le),Fe=function(e){return Object(f.jsxs)("div",{className:Ie.a.post,children:[Object(f.jsx)("img",{alt:"avatar",src:"https://i0.wp.com/www.defensemedianetwork.com/wp-content/uploads/2012/09/Army-Gas-Mask-And-Protective-Clothing.jpg?ssl=1"}),e.message,Object(f.jsx)("span",{children:"     "}),Object(f.jsx)("span",{children:"like: "})," ",e.likesAmount]})},ze=s.a.memo((function(e){var t=e.postsData.map((function(e){return Object(f.jsx)(Fe,{message:e.message,likesAmount:e.likesAmount})}));return Object(f.jsxs)("div",{children:["My posts",Object(f.jsx)(Ge,{onSubmit:function(t){e.addPost(t.newPostText)}}),t]})})),De=I(10),Ge=Object(E.a)({form:"ProfileAddNewPostForm"})((function(e){return Object(f.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(f.jsx)(y.a,{component:U,name:"newPostText",placeholder:"Type your post here",validate:[L,De]}),Object(f.jsx)("button",{type:"submit",children:"Add post"})]})})),Re=Object(G.b)((function(e){return{postsData:e.profilePage.postsData}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",postText:e}}(t))}}}))(ze),Me=function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(ke,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(f.jsx)(Re,{})]})},_e=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorisedUseId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(f.jsx)(Me,Object(v.a)(Object(v.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),n}(s.a.Component),Ke=Object(_.d)(Object(G.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorisedUseId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(){var t=Object(V.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(e);case 2:r=t.sent,n({type:"SET-USER-PROFILE",profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(V.a)(W.a.mark((function t(n){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.getStatus(e);case 2:r=t.sent,n(Te(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(V.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(Te(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),h.f)(_e),Qe=n(64),We=n.n(Qe),Ve=function(e){return Object(f.jsxs)("header",{className:We.a.header,children:[Object(f.jsx)("img",{src:"data:image/png;base64,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",className:We.a.AppLogo,alt:"logo"}),Object(f.jsx)("div",{className:We.a.loginBlock,children:e.isAuth?Object(f.jsxs)("div",{children:[e.login,"  ",Object(f.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(f.jsx)(d.b,{to:"/login",children:"Login"})})]})},Be=n(37),He="social-network/auth/SET-USER-DATA",Je={id:null,email:null,login:null,isAuth:!1},Xe=function(e,t,n,r){return{type:He,payload:{id:e,email:t,login:n,isAuth:r}}},qe=function(){return function(){var e=Object(V.a)(W.a.mark((function e(t){var n,r,s,a,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,s=r.id,a=r.email,o=r.login,t(Xe(s,a,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ye=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)(Ve,Object(v.a)({},this.props))}}]),n}(s.a.Component),Ze=Object(G.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(V.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:0===e.sent.data.resultCode&&t(Xe(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ye),$e=Object(E.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsx)("h1",{children:"Login"}),Object(f.jsx)("div",{children:Object(f.jsx)(y.a,{type:"text",placeholder:"Email",name:"email",component:T,validate:[L]})}),Object(f.jsx)("div",{children:Object(f.jsx)(y.a,{type:"password",placeholder:"Password",name:"password",component:T,validate:[L]})}),Object(f.jsxs)("div",{children:[Object(f.jsx)(y.a,{type:"checkbox",name:"rememberMe",component:T})," remember me"]}),n?Object(f.jsx)("div",{className:k.a.commonError,children:n}):Object(f.jsx)("br",{}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Login"})})]})})),et=Object(G.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var r=Object(V.a)(W.a.mark((function r(s){var a,o,i;return W.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Z(e,t,n);case 2:0===(a=r.sent).data.resultCode?s(qe()):(o=a.data.messages.length>0?a.data.messages[0]:"Some error",i=Object(Be.a)("login",{_error:o}),s(i));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(f.jsx)(h.a,{to:"/profile"}):Object(f.jsx)("div",{children:Object(f.jsx)($e,{onSubmit:function(t){console.log(t),e.login(t.email,t.password,t.rememberMe)}})})})),tt={initialized:!1},nt=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppTC()}},{key:"render",value:function(){return this.props.initialized?Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(Ze,{}),Object(f.jsx)(g,{}),Object(f.jsxs)("div",{className:"content",children:[Object(f.jsx)(h.b,{path:"/profile/:userId?",render:function(){return Object(f.jsx)(Ke,{})}}),Object(f.jsx)(h.b,{path:"/dialogs",render:function(){return Object(f.jsx)(K,{})}}),Object(f.jsx)(h.b,{path:"/users",render:function(){return Object(f.jsx)(ye,{})}}),Object(f.jsx)(h.b,{path:"/music",render:function(){return Object(f.jsx)(O,{})}}),Object(f.jsx)(h.b,{path:"/settings",render:function(){return Object(f.jsx)(m,{})}}),Object(f.jsx)(h.b,{path:"/login",render:function(){return Object(f.jsx)(et,{})}})]})]}):Object(f.jsx)(Oe,{})}}]),n}(s.a.Component),rt=Object(_.d)(h.f,Object(G.b)((function(e){return{initialized:e.app.initialized}}),{initializeAppTC:function(){return function(e){var t=e(qe());Promise.all([t]).then((function(){e({type:"INITIALIZED-SUCCESS"})}))}}}))(nt),st=(n(282),{}),at=n(125),ot=n(119),it=Object(_.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:"7",message:t.postText,likesAmount:"0"};return Object(v.a)(Object(v.a)({},e),{},{postsData:[n].concat(Object(x.a)(e.postsData)),newPostDataMessage:""});case"SET-USER-PROFILE":return Object(v.a)(Object(v.a)({},e),{},{profile:t.profile});case"SET-STATUS":return Object(v.a)(Object(v.a)({},e),{},{status:t.status});case"DELETE-POST":return Object(v.a)(Object(v.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var n=t.newMessageBody;return Object(v.a)(Object(v.a)({},e),{},{messagesData:[].concat(Object(x.a)(e.messagesData),[{id:"7",message:n}])})}return e},sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return e},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(v.a)(Object(v.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(v.a)(Object(v.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(v.a)(Object(v.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(v.a)(Object(v.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(v.a)(Object(v.a)({},e),{},{users:Object(x.a)(t.users)});case"SET-CURRENT-PAGE":return Object(v.a)(Object(v.a)({},e),{},{currentPage:t.currentPage});case"SET-TOTAL-USERS-COUNT":return Object(v.a)(Object(v.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE-IS-FETCHING":return Object(v.a)(Object(v.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-PROCESS":return Object(v.a)(Object(v.a)({},e),{},{followingProgress:t.isFetching?[].concat(Object(x.a)(e.followingProgress),[t.userId]):e.followingProgress.filter((function(e){return e!==t.userId}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return Object(v.a)(Object(v.a)({},e),t.payload);default:return e}},form:ot.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED-SUCCESS":return Object(v.a)(Object(v.a)({},e),{},{initialized:!0});default:return e}}}),ct=Object(_.e)(it,Object(_.a)(at.a));i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(d.a,{children:Object(f.jsx)(G.a,{store:ct,children:Object(f.jsx)(rt,{})})})}),document.getElementById("root")),a()},29:function(e,t,n){e.exports={dialogs:"dialogs_dialogs__2uGXI",dialogsItems:"dialogs_dialogsItems__3lLCa",dialog:"dialogs_dialog__OSYVN",active:"dialogs_active__rsQuI"}},34:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1xV1n",error:"FormsControls_error__DV7GC",commonError:"FormsControls_commonError__S4dHJ"}},35:function(e,t,n){e.exports={nav:"Nav_nav__3bJ-Z",active:"Nav_active__2ln6E"}},64:function(e,t,n){e.exports={header:"Header_header__1Oefr",AppLogo:"Header_AppLogo__dac4I","AppLogo-spin":"Header_AppLogo-spin__2fvJs",loginBlock:"Header_loginBlock__3VCUK"}}},[[283,1,2]]]);
//# sourceMappingURL=main.6a0a399a.chunk.js.map